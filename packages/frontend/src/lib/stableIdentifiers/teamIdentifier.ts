import { PlayerInGame } from "@/imports/api";
import createHash from "create-hash";

const RED = "#f5b7b1";
const BLUE = "#a9cce3";
const WHITE = "#fff";

export function getTeamColor(team: number) {
  if (team === 0) {
    return WHITE;
  }

  if (team === 1) {
    return RED;
  }

  return BLUE;
}

/**
 * There's something weird going on with how Safari calculates the hash, so we limit to 10 significant digits.
 *
 * @param seed The seed to use for the hash
 * @returns The number to use for the hash
 */
function getNumber(seed: string): number {
  const hash = createHash("sha256").update(seed).digest("hex").slice(0, 10);
  return parseInt(hash, 16);
}

export function getTeamName(players: PlayerInGame[], team: number) {
  const teamPlayers = players.filter((p) => p.team === team);
  if (teamPlayers.length === 0) {
    return "";
  }

  const seed = getNumber(
    teamPlayers.map((p) => p.playerId + p.displayName).join("")
  );

  const emojiSeed = seed % emojiList.length;

  return emojiList[emojiSeed] ?? "🤔";
}

const emojiList = [
  "🤪",
  "🤓",
  "✨",
  "🫧",
  "🎵",
  "🕺",
  "💪",
  "🌶️",
  "💁",
  "🕶️",
  "⚡",
  "👔",
  "🧠",
  "🤡",
  "😊",
  "🎩",
  "🌬️",
  "💝",
  "🌟",
  "🦋",
  "👑",
  "🥳",
  "🦘",
  "🤗",
  "😏",
  "😄",
  "🐦",
  "🎠",
  "🐯",
  "😜",
  "💃",
  "👗",
  "🛋️",
  "🎮",
  "👊",
  "💨",
  "🎨",
  "❄️",
  "💫",
  "🦿",
  "🎭",
  "🎢",
  "☀️",
  "🎉",
  "🎬",
  "💭",
  "🎈",
  "🎯",
  "🌈",
  "🎤",
  "🎶",
  "🎧",
  "🎹",
  "🎻",
  "🎺",
  "🌸",
  "🦁",
  "🎪",
  "🎸",
  "🦚",
  "🎡",
  "🎲",
  "🎷",
  "🦄",
  "🎱",
  "🎳",
  "🎰",
  "🎼",
  "🎥",
  "🎫",
  "🎾",
  "🎣",
  "🌺",
  "🦩",
  "🦒",
  "🦮",
  "🐝",
  "🦊",
  "🐼",
  "🦥",
  "🦦",
  "🦨",
  "🦡",
  "🦃",
  "🦢",
  "🦜",
  "🦅",
  "🦉",
  "🐸",
  "🦎",
  "🐢",
  "🦕",
  "🦖",
  "🐳",
  "🐋",
  "🐬",
  "🐟",
  "🐠",
  "🐡",
  "🦈",
  "🐙",
  "🦑",
  "🦐",
  "🦞",
  "🦀",
  "🐌",
  "🦗",
  "🐛",
  "🐜",
  "🐞",
  "🦂",
  "🕷️",
  "🦟",
  "🌍",
  "🌎",
  "🌏",
  "🎄",
  "🎃",
  "🎋",
  "🎍",
  "🎎",
  "🎏",
  "🎐",
  "🎑",
  "🧸",
  "🪀",
  "🪁",
  "🪄",
  "🪅",
  "🪆",
  "🪇",
  "🪈",
  "🎌",
  "🏮",
  "🐶",
  "🐱",
  "🐭",
  "🐹",
  "🐰",
  "🐻",
  "🐨",
  "🐷",
  "🐮",
  "🦌",
  "🐪",
  "🐫",
  "🦙",
  "🦓",
  "🐴",
  "🐗",
  "🐺",
  "🦇",
  "🦝",
  "🐿️",
  "🦫",
  "🦭",
  "🐘",
  "🦛",
  "🦏",
  "🐩",
  "🐎",
  "🦬",
  "🦣",
  "👶",
  "👧",
  "🧒",
  "👦",
  "👩",
  "🧑",
  "👨",
  "👩‍🦱",
  "🧑‍🦱",
  "👨‍🦱",
  "👩‍🦰",
  "🧑‍🦰",
  "👨‍🦰",
  "👱‍♀️",
  "👱",
  "👱‍♂️",
  "👩‍🦳",
  "🧑‍🦳",
  "👨‍🦳",
  "👩‍🦲",
  "🧑‍🦲",
  "👨‍🦲",
  "🧔‍♀️",
  "🧔",
  "🧔‍♂️",
  "👵",
  "🧓",
  "👴",
  "👲",
  "👳‍♀️",
  "👳",
  "👳‍♂️",
  "🧕",
  "👮‍♀️",
  "👮",
  "👮‍♂️",
  "👷‍♀️",
  "👷",
  "👷‍♂️",
  "💂‍♀️",
  "💂",
  "💂‍♂️",
  "🕵️‍♀️",
  "🕵️",
  "🕵️‍♂️",
  "👩‍⚕️",
  "🧑‍⚕️",
  "👨‍⚕️",
  "👩‍🌾",
  "🧑‍🌾",
  "👨‍🌾",
  "👩‍🍳",
  "🧑‍🍳",
  "👨‍🍳",
  "👩‍🎓",
  "🧑‍🎓",
  "👨‍🎓",
  "👩‍🎤",
  "🧑‍🎤",
  "👨‍🎤"
];
